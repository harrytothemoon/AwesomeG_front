(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d08a60a"],{"0275":function(e,t,a){"use strict";var s=a("2fa3");t["a"]={getOrders:function(){return s["b"].get("/student/orders")},getPayment:function(e){var t=e.orderId;return s["b"].get("/student/order/".concat(t,"/payment"))},postOrder:{create:function(e){var t=e.formData;return s["b"].post("/student/order",t)}}}},"25a8":function(e,t,a){"use strict";var s=a("f301"),r=a.n(s);r.a},"467e":function(e,t,a){},"4a39":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container py-5 text-primary",staticStyle:{"max-width":"950px"}},[a("ProductM",{attrs:{userId:e.userId}}),a("UserEditM",{attrs:{isProcessing:e.isProcessing,initialUser:e.user},on:{"after-update":e.handleAfterUpdate}}),e.isLoading?a("Spinner"):[a("ul",{staticClass:"nav nav-tabs mt-1 mb-4 d-flex justify-content-center"},[a("li",{staticClass:"nav-item w-50",staticStyle:{cursor:"pointer"}},[a("router-link",{staticClass:"nav-link text-center",attrs:{to:{name:"user",params:{id:e.user.id}}}},[a("h4",{attrs:{id:"userNav1"}},[e._v("My Information")])])],1),"student"===e.user.role?a("li",{staticClass:"nav-item w-50",staticStyle:{cursor:"pointer"}},[a("router-link",{staticClass:"nav-link text-center",attrs:{to:{name:"orders",params:{id:e.user.id}}}},[a("h4",{attrs:{id:"userNav2"}},[e._v("My Orders")])])],1):e._e()]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 mt-1 d-flex justify-content-start align-items-center"},[e.user.avatar?a("img",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"rounded-circle images",staticStyle:{cursor:"zoom-in"},attrs:{id:"userAvatar",src:e.user.avatar,alt:"Card image cap"}}):a("img",{staticClass:"rounded-circle",attrs:{id:"userAvatar",src:"https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",alt:"Card image cap"}})]),a("div",{staticClass:"col-5 mt-1 d-flex flex-column align-items-start justify-content-center"},[a("h2",[e._v(" Role : "),a("span",[e._v(e._s(e.user.role))])]),a("h1",{staticClass:"display-4",staticStyle:{color:"black"},attrs:{id:"username"}},[e._v(" "+e._s(e.user.name)+" ")]),"teacher"===e.user.role?a("span",{staticClass:"badge",class:{"badge-info":"Math"===e.user.expertise,"badge-success":"Physical"===e.user.expertise,"badge-secondary":"Chemical"===e.user.expertise}},[a("h6",{staticClass:"m-0"},[e._v(e._s(e.user.expertise))])]):e._e()]),"teacher"===e.user.role?a("div",{staticClass:"col-4 mt-1 d-flex flex-column align-items-end justify-content-center"},[a("h2",[e._v("Solved Problems")]),a("h1",{staticClass:"display-4",staticStyle:{color:"#c03546"}},[e._v(e._s(e.answers))])]):a("div",{staticClass:"col-4 mt-1 d-flex flex-column align-items-end justify-content-center"},[a("h2",[e._v("Asked Problems")]),a("h1",{staticClass:"display-4",staticStyle:{color:"#c03546"}},[e._v(e._s(e.questions))])])]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#useredit"}},[a("font-awesome-icon",{attrs:{icon:"pencil-alt",size:"2x"}}),a("h6",{staticClass:"d-inline"},[e._v("EDIT PROFILE")])],1)]),a("div",{staticClass:"card d-flex flex-row row border-0 mt-3",staticStyle:{"background-color":"#fffbf0"}},[a("div",{staticClass:"col-6 m-2"},[a("h3",{staticStyle:{color:"#4f86c6"}},[e._v("Gender")]),e.user.gender?a("h5",[e._v(e._s(e.user.gender))]):a("br"),a("h3",{staticStyle:{color:"#4f86c6"}},[e._v("Email")]),a("h5",[e._v(e._s(e.user.email))]),a("h3",{staticStyle:{color:"#4f86c6"}},[e._v("Password")]),a("h5",[e._v(e._s(e._f("filterPassword")(e.user.password)))]),"teacher"===e.user.role?[a("h3",{staticStyle:{color:"#4f86c6"}},[e._v("Bank Account")]),e.user.bankaccount?a("h5",[e._v(" "+e._s(e._f("filterPassword")(e.user.bankaccount))+" ")]):a("br")]:"student"===e.user.role?[a("h3",{staticStyle:{color:"#4f86c6"}},[e._v("Grade")]),e.user.grade?a("h5",[e._v(e._s(e.user.grade))]):a("br")]:e._e()],2),"teacher"===e.user.role?a("div",{staticClass:"col-5 p-2"},[a("h3",{staticStyle:{color:"#4f86c6"}},[e._v("About Me")]),a("div",{staticClass:"card rounded p-3",staticStyle:{height:"270px"}},[a("h5",[e._v(e._s(e._f("ellipsis")(e.user.introduction)))])])]):"student"===e.user.role?a("div",{staticClass:"col-5 p-2"},[a("h3",{staticStyle:{color:"#4f86c6"}},[e._v("Available Balance")]),e.user.quantity?a("h5",[e._v(e._s(e.user.quantity))]):a("h4",{staticClass:"mb-0"},[e._v("0")]),a("br"),a("button",{staticClass:"btn btn-success btn-lg d-flex align-items-center",staticStyle:{"max-width":"400px"},attrs:{type:"button","data-toggle":"modal","data-target":"#product",id:"depositbtn"}},[a("h1",{staticClass:"m-0 display-3 text-center",attrs:{id:"depositbtntext"}},[e._v(" Deposit ! ")])])]):e._e()])],a("div",{staticClass:"d-flex justify-content-center mt-4"},[a("NavTabs")],1)],2)},r=[],i=(a("fb6a"),a("b0c0"),a("96cf"),a("1da1")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal fade",attrs:{id:"product",tabindex:"-1",role:"dialog","aria-labelledby":"signinLabel","ria-hidden":"true"}},[a("div",{staticClass:"modal-dialog container py-5",staticStyle:{"max-width":"800px"}},[e.isLoading?a("Spinner"):a("div",{staticClass:"modal-content",staticStyle:{"background-color":"#fffbf0"}},[a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"close m-0 mr-3 mt-3",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),a("div",{staticClass:"text-center mb-2"},[a("h1",{staticClass:"h3 mb-3 display-3"},[e._v("Choose Plan")])]),a("div",{staticClass:"row m-3"},e._l(e.products,(function(t){return a("div",{key:t.id,staticClass:"col-6 text-center"},[a("form",{staticClass:"card w-100 rounded",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[a("h2",{staticClass:"mt-2",staticStyle:{color:"#c03546"}},[e._v("'"+e._s(t.name)+"'")]),a("h2",[e._v("Package")]),a("h2",[e._v("NT")]),a("h2",[e._v("$ "+e._s(t.price))]),a("h4",{staticClass:"text-center"},[e._v("Number of questions")]),a("h2",[e._v(e._s(t.description))]),a("input",{attrs:{name:"amount",type:"hidden"},domProps:{value:t.price}}),a("input",{attrs:{name:"productId",type:"hidden"},domProps:{value:t.id}}),a("input",{attrs:{name:"payment_status",type:"hidden",value:"0"}}),a("button",{staticClass:"btn btn-lg btn-primary mb-3 w-75 mx-auto",attrs:{disabled:e.isProcessing,type:"submit"}},[a("h4",{staticClass:"m-0"},[e._v("Choose")])])])])})),0)])],1)])},c=[],o=a("ee21"),l=a("0275"),u=a("2fa3"),d=a("2375"),m=a("1157"),p=a.n(m),v={components:{Spinner:d["a"]},props:{userId:{type:String,required:!0}},data:function(){return{products:[],isProcessing:!1,isLoading:!0}},created:function(){this.fetchProducts()},methods:{fetchProducts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getProducts();case 3:a=t.sent,e.products=a.data.products,e.isLoading=!1,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),u["a"].fire({icon:"error",title:"Can't not get products data, please try again later"}),e.isLoading=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleSubmit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.target,r=new FormData(s),a.prev=2,a.next=5,l["a"].postOrder.create({formData:r});case 5:i=a.sent,n=i.data,"success"===n.status&&(u["a"].fire({icon:"success",title:n.message}),p()("#product").modal("hide"),t.$router.push("/users/".concat(t.userId,"/orders"))),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](2),u["a"].fire({icon:"error",title:"Can't not post question, please try again later"});case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()}}},f=v,h=a("2877"),g=Object(h["a"])(f,n,c,!1,null,null,null),b=g.exports,C=a("8bb1"),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal fade",attrs:{id:"useredit",tabindex:"-1",role:"dialog","aria-labelledby":"usereditLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog text-primary text-center",attrs:{role:"document"}},[s("div",{staticClass:"modal-content",staticStyle:{"background-color":"#fffbf0"}},[e._m(0),s("h1",{staticClass:"modal-title",staticStyle:{color:"#c03546"},attrs:{id:"usereditLabel"}},[e._v(" User Edit ")]),s("div",{staticClass:"modal-body mt-2",attrs:{id:"usereditbody"}},[s("form",{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[s("fieldset",{staticClass:"form-group"},[s("div",{staticClass:"form-label-group mb-2 d-flex justify-content-around"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.gender,expression:"user.gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender",id:"gridRadios1",value:"Male"},domProps:{checked:e._q(e.user.gender,"Male")},on:{change:function(t){return e.$set(e.user,"gender","Male")}}}),e._m(1)]),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.gender,expression:"user.gender"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender",id:"gridRadios2",value:"Female"},domProps:{checked:e._q(e.user.gender,"Female")},on:{change:function(t){return e.$set(e.user,"gender","Female")}}}),e._m(2)])])]),s("div",{staticClass:"form-label-group mb-2"},[e._m(3),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control w-75 mx-auto",attrs:{id:"name",name:"name",type:"text",placeholder:"name",required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),e._m(4),e._m(5),"teacher"===e.user.role?s("div",{staticClass:"form-label-group mb-2"},[e._m(6),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.bankaccount,expression:"user.bankaccount"}],staticClass:"form-control w-75 mx-auto",attrs:{id:"bankaccount",name:"bankaccount",type:"text",placeholder:"bankaccount"},domProps:{value:e.user.bankaccount},on:{input:function(t){t.target.composing||e.$set(e.user,"bankaccount",t.target.value)}}}),s("fieldset",{staticClass:"form-group mt-3"},[s("h5",{staticClass:"text-center"},[e._v("Expertise")]),s("div",{staticClass:"form-check d-inline px-0"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.expertise,expression:"user.expertise"}],staticClass:"form-check-input",attrs:{type:"radio",name:"expertise",value:"Math"},domProps:{checked:e._q(e.user.expertise,"Math")},on:{change:function(t){return e.$set(e.user,"expertise","Math")}}}),e._v(" Math ")])]),s("div",{staticClass:"form-check d-inline"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.expertise,expression:"user.expertise"}],staticClass:"form-check-input",attrs:{type:"radio",name:"expertise",value:"Physical"},domProps:{checked:e._q(e.user.expertise,"Physical")},on:{change:function(t){return e.$set(e.user,"expertise","Physical")}}}),e._v(" Physical ")])]),s("div",{staticClass:"form-check d-inline"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.expertise,expression:"user.expertise"}],staticClass:"form-check-input",attrs:{type:"radio",name:"expertise",value:"Chemical"},domProps:{checked:e._q(e.user.expertise,"Chemical")},on:{change:function(t){return e.$set(e.user,"expertise","Chemical")}}}),e._v(" Chemical ")])])])]):s("div",{staticClass:"form-label-group mb-2"},[e._m(7),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.grade,expression:"user.grade"}],staticClass:"form-control w-75 mx-auto",attrs:{id:"grade",name:"grade",type:"text",placeholder:"grade"},domProps:{value:e.user.grade},on:{input:function(t){t.target.composing||e.$set(e.user,"grade",t.target.value)}}})]),"teacher"===e.user.role?s("div",{staticClass:"row"},[s("div",{staticClass:"form-label-group col-6"},[e._m(8),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.introduction,expression:"user.introduction"}],staticClass:"form-control",attrs:{id:"introduction",rows:"7",placeholder:" Please introduce yourself...",name:"introduction"},domProps:{value:e.user.introduction},on:{input:function(t){t.target.composing||e.$set(e.user,"introduction",t.target.value)}}})]),s("div",{staticClass:"form-label-group mb-3 col-6"},[s("h4",[e._v("User's Avatar")]),s("div",{staticClass:"avatar-upload-block btn btn-outline-secondary d-flex justify-content-center align-items-center",staticStyle:{border:"3px dashed"}},[s("input",{staticClass:"form-control-file",staticStyle:{cursor:"pointer"},attrs:{id:"avatar-file",type:"file",name:"avatar",accept:"image/*"},on:{change:e.handleFileChange}}),e.user.avatar?s("img",{staticClass:"d-block rounded",staticStyle:{cursor:"pointer"},attrs:{src:e.user.avatar,id:"custom-avatar"}}):s("img",{staticClass:"d-block",staticStyle:{cursor:"pointer"},attrs:{src:a("fd6d"),id:"custom-avatar-default",width:"70px",height:"70px"}})])])]):[s("h5",{staticClass:"my-3"},[e._v("User's Avatar")]),s("div",{staticClass:"mx-auto avatar-upload-block btn btn-outline-secondary d-flex justify-content-center align-items-center",staticStyle:{border:"3px dashed"}},[s("input",{staticClass:"form-control-file",staticStyle:{cursor:"pointer"},attrs:{id:"avatar-file",type:"file",name:"avatar",accept:"image/*"},on:{change:e.handleFileChange}}),e.user.avatar?s("img",{staticClass:"d-block rounded",staticStyle:{cursor:"pointer"},attrs:{src:e.user.avatar,id:"custom-avatar"}}):s("img",{staticClass:"d-block",staticStyle:{cursor:"pointer"},attrs:{src:a("fd6d"),id:"custom-avatar-default",width:"70px",height:"70px"}})])],s("button",{staticClass:"btn btn-primary btn-block mt-4 mb-3 w-25 mx-auto",attrs:{type:"submit",disabled:e.isProcessing}},[s("h4",{staticClass:"m-0"},[e._v("Update")])])],2)])])])])},x=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"close m-0 mr-3 mt-3",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"form-check-label pl-3",attrs:{for:"gridRadios1"}},[a("h5",[e._v("Male")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"form-check-label pl-3",attrs:{for:"gridRadios2"}},[a("h5",[e._v("Female")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"name"}},[a("h5",[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password"}},[a("h5",[e._v("Password")])]),a("input",{staticClass:"form-control w-75 mx-auto",attrs:{id:"password",name:"password",type:"password",placeholder:"Password",autocomplete:"new-password"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password-check"}},[a("h5",[e._v("Password Check")])]),a("input",{staticClass:"form-control w-75 mx-auto",attrs:{id:"password-check",name:"passwordCheck",type:"password",placeholder:"Password",autocomplete:"new-password"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"bankaccount"}},[a("h5",[e._v("Bank Account")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"grade"}},[a("h5",[e._v("Grade")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"introduction"}},[a("h4",[e._v("Introduction")])])}],y=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5530")),w={props:{initialUser:{type:Object,default:function(){return{id:"",name:"",password:"",indroduction:"",avatar:"",gender:"",grade:"",bankaccount:"",expertise:""}}},isProcessing:{type:Boolean,required:!0}},data:function(){return{user:Object(y["a"])({},this.initialUser)}},methods:{handleFileChange:function(e){var t=e.target.files;if(0===t.length)this.user.avatar="";else{var a=window.URL.createObjectURL(t[0]);this.user.avatar=a}},handleSubmit:function(e){var t=e.target,a=new FormData(t);this.$emit("after-update",a)}},watch:{initialUser:function(e){this.user=Object(y["a"])(Object(y["a"])({},this.user),e)}}},k=w,P=(a("25a8"),Object(h["a"])(k,_,x,!1,null,null,null)),S=P.exports,$=a("4cce"),j=a("4360"),E={name:"User",components:{ProductM:b,NavTabs:C["a"],Spinner:d["a"],UserEditM:S},data:function(){return{user:{id:-1,name:"",email:"",password:"",introduction:"",role:"",avatar:"",gender:"",quantity:"",grade:"",bankaccount:"",expertise:""},answers:"",questions:"",userId:"",isLoading:!0,isProcessing:!1}},created:function(){var e=this.$route.params.id;this.fetchUser(e)},methods:{fetchUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,$["a"].getUser({userId:e});case 3:if(s=a.sent,"error"!==s.status){a.next=7;break}throw t.isLoading=!1,new Error(s.message);case 7:t.user={id:s.data.user.id,name:s.data.user.name,email:s.data.user.email,password:s.data.user.password,introduction:s.data.user.introduction,role:s.data.user.role,avatar:s.data.user.avatar,gender:s.data.user.gender,quantity:s.data.user.quantity,grade:s.data.user.grade,bankaccount:s.data.user.bankaccount,expertise:s.data.user.expertise},t.answers=s.data.user.Answers.length,t.questions=s.data.user.Questions.length,t.userId=String(s.data.user.id),t.isLoading=!1,a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](0),u["a"].fire({icon:"error",title:"Can't not get data, please try again later"}),t.isLoading=!1;case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()},handleAfterUpdate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isProcessing=!0,a.next=4,$["a"].putUser.update({id:t.userId,formData:e});case 4:if(s=a.sent,r=s.data,"success"!==r.status){a.next=14;break}t.isProcessing=!1,u["a"].fire({icon:"success",title:r.message}),t.fetchUser(t.userId),j["a"].dispatch("fetchCurrentUser"),p()("#useredit").modal("hide"),a.next=22;break;case 14:if("warning"!==r.status){a.next=19;break}t.isProcessing=!1,u["a"].fire({icon:"warning",title:r.message}),a.next=22;break;case 19:throw t.isProcessing=!1,p()("#useredit").modal("hide"),new Error(r.message);case 22:a.next=28;break;case 24:a.prev=24,a.t0=a["catch"](0),t.isProcessing=!1,u["a"].fire({icon:"error",title:"Can't not update, please try again later"});case 28:case"end":return a.stop()}}),a,null,[[0,24]])})))()}},filters:{filterPassword:function(){return"．．．．．．．．"},ellipsis:function(e){return e?e.length>300?e.slice(0,300)+" ...":e:""}}},U=E,q=(a("79cc"),Object(h["a"])(U,s,r,!1,null,null,null));t["default"]=q.exports},"79cc":function(e,t,a){"use strict";var s=a("467e"),r=a.n(s);r.a},ee21:function(e,t,a){"use strict";var s=a("2fa3");t["a"]={getProducts:function(){return s["b"].get("/products")}}},f301:function(e,t,a){}}]);
//# sourceMappingURL=chunk-3d08a60a.fe5d7e76.js.map